# ubuntu 命令行测试带宽


在 Ubuntu 中，你可以使用 `iperf` 这个工具来测试网络带宽。`iperf` 是一个网络性能测试工具，可以用来测试 TCP 和 UDP 的带宽性能。

### 安装 iperf

首先，你需要确保 `iperf` 已经安装在你的系统上。如果还没有安装，可以通过以下命令安装：

```bash
sudo apt update
sudo apt install iperf
```

### 设置 iperf 服务器

要测试带宽，你需要一个 `iperf` 服务器。如果你没有远程服务器，可以在本地机器上设置一个。打开一个终端窗口，运行以下命令：

```bash
iperf -s

# 指定端口
iperf -s -p 8080
```

这将启动一个 `iperf` 服务器，等待客户端的连接。

### 运行 iperf 测试

在另一个终端窗口或者另一台机器上，运行以下命令来测试带宽：

```bash
iperf -c SERVER_IP -t DURATION
```

- `SERVER_IP` 是运行 `iperf` 服务器的机器的 IP 地址。
- `DURATION` 是测试的持续时间（以秒为单位）。

例如，如果你的服务器 IP 是 `192.168.1.100`，并且你想要测试 10 秒，你可以运行：

```bash
iperf -c 192.168.1.100 -t 10

# 连接指定端口
iperf -c 192.168.8.250 -t 10 -p 8080

```

### 其他 iperf 选项

- **带宽测试**：使用 `-b` 选项指定带宽目标，例如 `-b 1M` 测试 1 Mbps 的带宽。
- **UDP 测试**：使用 `-u` 选项进行 UDP 测试。
- **多线程测试**：使用 `-P` 选项指定线程数，例如 `-P 4` 使用 4 个线程。

### 示例

这是一个完整的 `iperf` 测试示例：

1. 在服务器上：
   ```bash
   iperf -s
   ```

2. 在客户端上：
   ```bash
   iperf -c 192.168.1.100 -t 10
   ```

### 解读结果

`iperf` 会显示测试结果，包括带宽、吞吐量、丢包率等信息。例如：

```
------------------------------------------------------------
Client connecting to 192.168.1.100, TCP port 5001
TCP window size: 85.3 KByte (default)
------------------------------------------------------------
[  3] local 192.168.1.101 port 59276 connected with 192.168.1.100 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0-10.0 sec  1.25 GBytes  1.06 Gbps
```

在这个例子中，客户端在 10 秒内发送了 1.25 GB 的数据，达到了大约 1.06 Gbps 的带宽。

### 注意事项

- 确保测试期间没有其他网络活动影响结果。
- `iperf` 测试结果受多种因素影响，包括网络拥塞、硬件性能等。
- 如果你使用的是 Wi-Fi 或移动网络，测试结果可能会有很大波动。

通过这些步骤，你可以使用 `iperf` 在 Ubuntu 命令行中测试网络带宽。
